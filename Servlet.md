执行原理

1. 当服务器接受到客户端的请求后,回解析请求URL的路径,获取访问的servlet的资源路径
2. 查找web.xml文件,是否对应<url-pattern>标签体内容
3. 如果有,则在找到对应的<servlet-class>全类名
4. tomcat会将字节码加载进内存,并且创建对象
5. 调用方法

Servlet方法

1. 初始化方法 在servlet创建时执行,只会执行一次

2. ```java
   init()
   ```

3. 每一次servlet被访问时执行,执行多次

4. ```java
   service`()
   ```

5. 在servlet被杀死时执行 在服务器正常关闭时执行

6. ```java
   destroy()
   ```

servlet的生命周期

1. 被创建 执行init方法
2. 提供服务 执行service方法
3. 被销毁 执行destroy方法

servlet3.0

​	好处:

​		支持注解配置

步骤

创建JavaEE项目,选择servlet3.0以上

定义一个类实现servlet

复写方法

在类上使用注解@webservlet注解,进行配置

Http:

概念:Hyper Text Transfer Protocol超文本传输协议

传输协议:定义了客户端和服务器端通信时,发送数据的格式

特点:

基于Tcp/IP的高级协议

默认端口号:80

基于请求响应模型

无状态的 每次请求之间相互独立 不能交互数据

**历史版本**

1.0 每一次请求都会建立一个新的连接

1.1 复用连接

请求消息数据格式

1. **请求行**

   请求方式 请求url 请求协议/版本

   ​	GET:

   ​		请求参数在请求行中

   ​		请求的url长度有限制的

   ​		不太安全

   ​	POST:

   ​		请求参数在请求体中

   ​		请求的url没有限制

   ​		相对安全

2. **请求头**

   请求头名称:请求头值

   常见的请求头

   1. User-Agent:浏览器告诉服务器,访问的浏览器的版本信息

   2. Referer:告诉服务器,当前请求,从哪里来

      作用:

      ​	防盗链

      ​	统计工作

   3. Connction:连接未结束 浏览器和服务器

3. **请求空行**

   空行 分隔作用

4. **请求体**

   参数 =  数据

   封装POST请求消息的请求参数的 

响应消息数据格式

## HTTP

1. Http协议:响应消息
2. Response对象
3. ServletContext对象

HTTP协议

1. 请求消息

2. 响应消息

   数据格式

   ​	**响应行**

   ​		组成:协议/版本 响应状态码 状态码描述

   ​		响应状态码:服务器告诉客户端本次请求和响应的一个状态

   ​		分类:

   ​			1xx  接受一半

   ​			2xx  成功

   ​			3xx  重定向 302  304缓存

   ​			4xx  客户端错误

   ​			5xx  服务器端错误

   ​	**响应头**

   ​		格式:头名称:值

   ​		常见的响应头

   ​			Content-Type:服务器告诉客户端本次响应数据格式以及编码格式

   ​			Content-disposition:服务器告诉客户端以什么格式打开响应体数据		in-line默认值,在当前页面打开  attachment:以附形式打开响应体.文件下载

   ​	**响应空行**

   ​	**响应体**

### Response对象

功能:设置响应消息

设置状态码

```java
setStatus(int sc)
```

设置响应头

```java
setHeader(String name, String value)
```

设置响应体

重定向的特点

1. 地址栏发生变化
2. 重定向可以访问其他站点(服务器)的资源
3. 重定向是两次请求

转发的特点

1. 转发地址栏路径不变
2. 转发只能访问当前服务器下的资源
3. 转发是一次请求,可以使用request对象来共享数据

forward 和 redirect 区别

路径的分类

- 相对路径
- 绝对路径

动态获取目录

```java\
request.getContexPath();
```

